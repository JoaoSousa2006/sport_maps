DROP DATABASE IF EXISTS sport_maps;
CREATE DATABASE sport_maps;
USE sport_maps;

-- Tabela: Users
DROP TABLE IF EXISTS tblUsers;
CREATE TABLE tblUsers (
    idUser INT AUTO_INCREMENT PRIMARY KEY,
    NameUser VARCHAR(100) NOT NULL,
    PasswordUser VARCHAR (20) NOT NULL,
    EmailUser VARCHAR(100) UNIQUE NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

-- Tabela: Sports
DROP TABLE IF EXISTS tblSports;
CREATE TABLE tblSports (
    idSport INT AUTO_INCREMENT PRIMARY KEY,
    SportType ENUM('biking', 'skating', 'roller skating', 'running', 'court', 'sports') NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

-- Tabela: Places
DROP TABLE IF EXISTS tblPlaces;
CREATE TABLE tblPlaces (
    idPlace INT AUTO_INCREMENT PRIMARY KEY,
    NamePlace VARCHAR(100) NOT NULL,
    AdressPlace text(1000) NOT NULL UNIQUE,
    EmailPlace VARCHAR(500) NULL,
    PhonePlace VARCHAR(20) NULL,
    LatPlace VARCHAR(3),
    LongPlace VARCHAR(3),
    PricePlace FLOAT(5),
    SportType ENUM('biking', 'skating', 'roller skating', 'running', 'court', 'sports') NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

-- Tabela: Feedbacks
DROP TABLE IF EXISTS tblFeedbacks;
CREATE TABLE tblFeedbacks (
    idFeedback INT AUTO_INCREMENT PRIMARY KEY,
    idUser INT NOT NULL,
    idPlace INT NOT NULL,
    ContentFeedback text(10000) NOT NULL,
    FOREIGN KEY (idUser) REFERENCES tblUsers(idUser),
    FOREIGN KEY (idPlace) REFERENCES tblPlaces(idPlace)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

-- Tabela: placesScores
DROP TABLE IF EXISTS placesScores;
CREATE TABLE placesScores (
    idScore INT AUTO_INCREMENT PRIMARY KEY,
    idUser INT NOT NULL,
    idPlace INT NOT NULL,
    SportType ENUM('biking', 'skating', 'roller skating', 'running', 'court', 'sports') NOT NULL,
    votes INT DEFAULT 0,
    FOREIGN KEY (idUser) REFERENCES tblUsers(idUser),
    FOREIGN KEY (idPlace) REFERENCES tblPlaces(idPlace)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

-- Inserção de dados na tabela tblUsers
INSERT INTO tblUsers (NameUser, EmailUser)
VALUES
('João Silva', 'joao@gmail.com'),
('Ana Santos', 'ana@gmail.com'),
('Carlos Oliveira', 'carlos@gmail.com'),
('Mariana Costa', 'mariana@gmail.com'),
('Fernanda Lima', 'fernanda@gmail.com'),
('Pedro Mendes', 'pedro@gmail.com'),
('Giulia Grossi', 'Giulia@gmail.com'),
('Lucas Ramos', 'lucas@gmail.com'),
('Beatriz Souza', 'beatriz@gmail.com'),
('Rafael Andrade', 'rafael@gmail.com');

SELECT * FROM tblusers;
